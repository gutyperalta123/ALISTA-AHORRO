<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Productos</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <!-- opcional: bootstrap para estilos r√°pidos -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  {% include 'header.html' %}

  <main class="container my-4">
    <h2 class="mb-3">
      {% if rol == 'admin' %}GESTI√ìN DE PRODUCTOS{% else %}BUSCAR PRODUCTOS{% endif %}
    </h2>

    <!-- barra de acciones (seg√∫n rol) -->
    <div class="mb-4">
      {% if rol == 'admin' %}
        <form action="/add_producto" method="post" class="d-flex gap-2">
          <input class="form-control" type="text" name="nombre" placeholder="Nuevo producto" required />
          <button class="btn btn-success" type="submit">AGREGAR</button>
        </form>
      {% else %}
        <form action="/buscar" method="get" class="d-flex gap-2">
          <input class="form-control" type="text" name="query" placeholder="Buscar producto..." required />
          <button class="btn btn-primary" type="submit">üîç</button>
        </form>
      {% endif %}
    </div>

    <!-- listado de productos -->
    <ul class="list-group">
      {% for producto in productos %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span>{{ producto }}</span>

          {% if rol == 'admin' %}
            <a class="btn btn-outline-danger btn-sm" href="/delete_producto/{{ loop.index0 }}">ELIMINAR</a>
          {% else %}
            <form action="/agregar_carrito" method="post" class="m-0">
              <input type="hidden" name="nombre" value="{{ producto }}">
              <input type="hidden" name="tipo" value="producto">
              <button class="btn btn-primary btn-sm" type="submit">COMPRAR</button>
            </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </main>

  {% include 'footer.html' %}

  <!-- flotantes -->
  <a href="/carrito" class="carrito">üõí</a>
  <a href="#" class="whatsapp">WhatsApp</a>

  <!-- opcional: bootstrap js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
